<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USCDI Viewer - SMART on FHIR App</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <!-- script src="https://raw.githubusercontent.com/smart-on-fhir/client-js/master/dist/build/fhir-client.js"></script -->
    <!-- script src="fhir-client.js"></script -->
    <script src="https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.js"></script>
    <script src="app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lato', sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        h1 {
            font-weight: 700;
            color: #001F5B;
        }

        button {
            background-color: #0072CE;
            color: #fff;
            border: none;
            padding: 12px 20px;
            text-align: center;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background-color: #005fa3;
        }

        input[type="text"], input[type="radio"] {
            margin: 5px;
        }

        label {
            font-weight: 700;
        }
	</style>
</head>

<body>
    <h1>Patient History</h1>
    <p>This is a SMART on FHIR app for patient use. It performs a <a href="https://hl7.org/fhir/smart-app-launch/app-launch.html#app-launch-launch-and-authorization" target="_blank">"standalone" launch</a>, during which the EMR will ask you to present patient credentials; note that this app is never given access to those credentials. During the launch you'll also be asked whether you want this app to be able to access certain information from your health record; this app only reads this information in order to display it to you, and does not otherwise share it, nor store it.</p>
    <p>This app can use the SMART on FHIR server of your choosing*.</p>
    <label for="fhir-base-url">FHIR base URL (R4):</label>
    <input type="text" id="fhir-base-url" size="80"/><br/>
    <div>
        <input type="radio" id="non-production" name="environment" value="non-production" checked>
        <label for="non-production">Non-production</label>
        <input type="radio" id="production" name="environment" value="production">
        <label for="production">Production</label>
    </div>
    <button id="start-app-button">LAUNCH</button>
    <br/>

    <div id="PatientContent"></div>
    <div id="ImmunizationContent"></div>
    <div id="AllergyIntoleranceContent"></div>
    <div id="MedicationStatementContent"></div>
    <div id="MedicationRequestContent"></div>
    <div id="MedicationContent"></div>
    <div id="ConditionContent"></div>
    <div id="ObservationContent"></div>
    <div id="OrganizationContent"></div>
    <div id="DeviceContent"></div>
    <div id="DeviceUseStatementContent"></div>
    <div id="DiagnosticReportContent"></div>
    <div id="ImagingStudyContent"></div>
    <div id="MediaContent"></div>
    <div id="PractitionerContent"></div>
    <div id="PractitionerRoleContent"></div>
    <div id="ProcedureContent"></div>
    <div id="SpecimenContent"></div>
    
    <br/>
    <p>Alternatively, add the "sof_host" parameter to the URL (e.g. "?sof_host=epic") to specify either:</p> 
    <ul>
    <li>"smit"
    <ul>
        <li>https://launch.smarthealthit.org/v/r4/sim/[guid-ish]/fhir</li>
        <li>Mr. Abdul Koepp has immunizations (credentials pre-populated).</li>
    </ul>
    or 
    <li>"epic"
    <ul>
        <li>The non-production Epic endpoint</li>
        <li>https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4</li>
        <li>Desiree Powell has immunizations (credentials: fhirdesiree / epicepic1). Epic's list of other test patients is <a href="https://fhir.epic.com/Documentation?docId=testpatients" target="_blank">here</a>.</li>
    </ul>        
    </ul>
    <br/>
    <p>* USCDI public endpoints (choose "Production" above):</p>
    <ul>
        <li><a href="https://open.epic.com/MyApps/Endpoints" target="_blank">Epic</a></li>
        <li><a href="https://fhir.cerner.com/millennium/r4/" target="_blank">Cerner (not yet supported by this app)</a></li>
    </ul>
    <br/>
    <br/>
    <p><i><a href="https://github.com/uwcirg" target="_blank">UW Clinical Informatics Research Group</a>, 2023</i></p>    
</body>
</html>
